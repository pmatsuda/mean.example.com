var articlesApp=function(){function e(e,t,n){let i=document.getElementById(e);i.addEventListener("submit",(function(e){e.preventDefault();let a=new FormData(i),r=`${window.location.origin}${t}`,l=new XMLHttpRequest;l.open(n,r),l.setRequestHeader("Content-Type","application/json; charset=UTF-8");let d={};a.forEach((function(e,t){d[t]=e})),l.send(JSON.stringify(d)),l.onload=function(){!0===JSON.parse(l.response).success?window.location.href="/articles/app":document.getElementById("formMsg").style.display="block"}}))}function t(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),i="";i=`<div class="card bg-transparent border-danger text-danger bg-danger">\n          <div class="card-header bg-transparent border-danger">\n            <h2 class="h3 text-center">Delete an Article</h2>\n          </div>\n          <div class="card-body text-center">\n            <div>\n              Are you sure you want to delete\n              <strong>${t.article.title} ${t.article.title}</strong>\n            </div>\n    \n            <div>Username: <strong>${t.article.title}</strong></div>\n            <div>Email: <strong>${t.article.published}</strong></div>\n    \n            <div class="text-center">\n              <br>\n              <a class="btn btn-lg btn-danger text-white">\n              <a onclick="articlesApp.deleteArticle('${t.article._id}');" class="btn btn-lg btn-danger text-white">\n                Yes delete ${t.article.title}\n              </a>\n              </a>\n            </div>\n    \n          </div>\n        </div>`,e.innerHTML=i}}function t(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("DELETE",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){!0===JSON.parse(n.response).success?window.location.hash="#":alert("Unknown error, the article could not be deleted")}}return{deleteArticle:function(e){t(e)},load:function(){let n=window.location.hash.split("-");switch(n[0]){case"#create":document.getElementById("app").innerHTML='\n            <div class="card">\n              <div class="card-header clearfix">\n                <h2 class="h3 float-left">Create a New Article</h2>\n                <div class="float-right">\n                  <a href="#" class="btn btn-primary">Cancel</a>\n                </div>\n              </div>\n              <div class="card-body">\n                <form id="createArticle" class="card-body">\n                  <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n      \n                  <div class="row">\n                    <div class="form-group col-md-6">\n                      <label for="first_name">Title</label>\n                      <input type="text" id="title" name="title" class="form-control" required>\n                    </div>\n      \n                    <div class="form-group col-md-6">\n                      <label for="description">Description</label>\n                      <input type="text" id="description" name="description" class="form-control" required>\n                    </div>\n                  </div>\n      \n                  <div class="row">\n                    <div class="form-group col-md-6">\n                      <label for="content">Content</label>\n                      <textarea cols="200" rows=" 15" id="body" name="body" class="form-control" required>\n                      </textarea>\n                  </div>\n      \n                    <div class="form-group col-md-6">\n                      <label for="keyword">Keywords</label>\n                      <input type="text" id="keyword" name="keyword" class="form-control" required>\n                    </div>\n                  </div>\n      \n                  <div class="text-right">\n                    <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                  </div>\n                </form>\n              </div>\n            </div>\n        ',e("createArticle","/api/articles","POST");break;case"#view":!function(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),i="";i=`<div class="card">\n            <div class="card-header clearfix">\n              <h2 class="h3 float-left">${t.article.title}</h2>\n              <div class="float-right">\n                <a href="#edit-${t.article._id}" class="btn btn-primary">Edit</a>\n              </div>\n            </div>\n            <div class="card-body">\n              <div>${t.article.title}</div><br>\n              <div>${t.article.published}</div><br>\n              <div>${t.article.body}</div><br>\n              <div>${t.article.Keywords}</div>\n            </div>\n          </div>`,e.innerHTML=i}}(n[1]);break;case"#edit":!function(t){let n=`${window.location.origin}/api/articles/${t}`,i=new XMLHttpRequest;i.open("GET",n),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.send(),i.onload=function(){let t=document.getElementById("app"),n=JSON.parse(i.response);var a=`\n            <div class="card">\n              <div class="card-header clearfix">\n                <h2 class="h3 float-left">Edit</h2>\n                <div class="float-right">\n                  <a href="#" class="btn btn-primary">Cancel</a>\n                </div>\n              </div>\n              <div class="card-body">\n                <form id="editUser" class="card-body">\n                  <input type="hidden" id="_id" name="_id" value="${n.article._id}">\n                  <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n        \n                  <div class="row">\n                    <div class="form-group col-md-6">\n                      <label for="title">Title</label>\n                      <input type="text" id="title" name="title" class="form-control" value="${n.article.title}" required>\n                    </div>\n        \n                    <div class="form-group col-md-6">\n                      <label for="content">Content</label>\n                      <textarea id="content" name="content" class="form-control" value="${n.article.body}" required>\n                      </textarea>\n                    </div>\n                  </div>\n        \n                  <div class="row">\n                    <div class="form-group col-md-6">\n                      <label for="keywords">Keywords</label>\n                      <input type="text" id="keyword" name="keyword" class="form-control" value="${n.article.Keywords}" required>\n                    </div>\n                  </div>\n        \n                  <div class="text-right">\n                    <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                  </div>\n                </form>\n              </div>\n            </div>\n            <div>\n              <a href="#delete-${n.article._id}" class="text-danger">Delete</a>\n            </div>\n          `;t.innerHTML=a,e("editArticle","/api/articles","PUT")}}(n[1]);break;case"#delete":t(n[1]);break;default:!function(){let e=`${window.location.origin}/api/articles`,t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response).articles,i="",a="";for(let e=0;e<n.length;e++)a+=`<tr>\n            <td>\n              <a href="#view-${n[e]._id}">${n[e].title}</a>\n            </td>\n            <td>${n[e].published}</td>\n          </tr>`;i=`<div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">Articles</h2>\n            <div class="float-right">\n              <a href="#create" class="btn btn-primary">Add New Article</a>\n            </div>\n          </div>\n          <div class="table-responsive">\n            <table class="table table-striped table-hover table-bordered">\n              <thead>\n                <tr>\n                  <td>Title</td>\n                  <td>Published</td>\n                  <td>Description</td>\n                </tr>\n              </thead>\n              <tbody>${a}</tbody>\n            </table>\n          </div>\n        </div>`,e.innerHTML=i}}()}}}}();articlesApp.load(),window.addEventListener("hashchange",(function(){articlesApp.load()}));